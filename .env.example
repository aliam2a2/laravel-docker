############################################
# Docker Compose + Laravel (.env)
############################################

# A name for the compose project (shows up in container/volume names)
COMPOSE_PROJECT_NAME=laravel12

# serversideup/php base image tag (Laravel 12 requires PHP >= 8.2)
# Examples:
#   serversideup/php:8.4-fpm-nginx
#   serversideup/php:8.5-fpm-nginx-bookworm
PHP_BASE_IMAGE=serversideup/php:8.4-fpm-nginx

# The image name for your app (used by compose)
APP_IMAGE=myorg/laravel-app
APP_IMAGE_TAG=prod

############################################
# Development (compose.yml)
############################################

# Host UID/GID for Linux file permissions
# (run: id -u) and (id -g)
HOST_UID=1000
HOST_GID=1000

# Publish container ports
APP_HTTP_PORT=80
APP_HTTPS_PORT=443

# SSL: off | mixed | full
SSL_MODE=mixed

# Use Laravel /up route for container health checks
HEALTHCHECK_PATH=/up

# Enable OPcache (recommended in prod; OK in dev too)
PHP_OPCACHE_ENABLE=1

# Queue worker tries
QUEUE_TRIES=3

# Reverb server port inside container and exposed port on host (dev only)
REVERB_SERVER_PORT=8000
REVERB_EXPOSED_PORT=8000

############################################
# Production (compose.prod.yml + Traefik)
############################################

TRAEFIK_VERSION=v3.4
TRAEFIK_DASHBOARD=false
TRAEFIK_ACME_EMAIL=you@example.com
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443

# Public domains (Traefik routers)
APP_DOMAIN=app.example.com
REVERB_DOMAIN=reverb.example.com

############################################
# Laravel app settings (used by Laravel)
############################################

APP_NAME="Laravel"
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

LOG_CHANNEL=stack
LOG_LEVEL=debug

# Database (Laravel)
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=laravel
DB_PASSWORD=laravel

# MariaDB container init vars
MARIADB_VERSION=11
MARIADB_ROOT_PASSWORD=rootpassword
MARIADB_DATABASE=laravel
MARIADB_USER=laravel
MARIADB_PASSWORD=laravel

# Cache/Queue/Session (Redis)
REDIS_VERSION=alpine
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redispassword

CACHE_STORE=redis
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis

############################################
# Laravel Horizon
############################################
# Horizon uses Redis via the same REDIS_* vars above.

############################################
# Laravel Reverb
############################################
# CLIENT connection info (what the browser connects to)
REVERB_APP_ID=
REVERB_APP_KEY=
REVERB_APP_SECRET=
REVERB_HOST=reverb.example.com
REVERB_PORT=443
REVERB_SCHEME=https

# SERVER info (Reverb daemon itself)
REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8000

BROADCAST_CONNECTION=reverb

# If you use Vite:
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT="${REVERB_PORT}"
VITE_REVERB_SCHEME="${REVERB_SCHEME}"
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"

############################################
# serversideup Laravel Automations (prod)
############################################
# By default DISABLED; recommended only in production.
AUTORUN_ENABLED=false
AUTORUN_DEBUG=false

AUTORUN_LARAVEL_OPTIMIZE=true
AUTORUN_LARAVEL_CONFIG_CACHE=true
AUTORUN_LARAVEL_ROUTE_CACHE=true
AUTORUN_LARAVEL_VIEW_CACHE=true
AUTORUN_LARAVEL_EVENT_CACHE=true
AUTORUN_LARAVEL_STORAGE_LINK=true

AUTORUN_LARAVEL_MIGRATION=true
AUTORUN_LARAVEL_MIGRATION_MODE=default
AUTORUN_LARAVEL_MIGRATION_FORCE=true
AUTORUN_LARAVEL_MIGRATION_SEED=false
AUTORUN_LARAVEL_MIGRATION_TIMEOUT=30
AUTORUN_LARAVEL_MIGRATION_DATABASE=
AUTORUN_LARAVEL_MIGRATION_ISOLATION=false
AUTORUN_LARAVEL_MIGRATION_SKIP_DB_CHECK=false
